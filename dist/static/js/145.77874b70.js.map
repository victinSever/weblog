{"version":3,"file":"static/js/145.77874b70.js","mappings":"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","sources":["webpack://weblog/./src/views/signup/pages/reback.vue","webpack://weblog/./src/utils/reg.js","webpack://weblog/src/views/signup/pages/reback.vue","webpack://weblog/./src/views/signup/pages/reback.vue?9547","webpack://weblog/./src/views/signup/pages/reback.vue?4c30"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-form',{ref:\"restoreForm\",attrs:{\"model\":_vm.restoreForm,\"status-icon\":\"\",\"size\":\"medium\"}},[_c('el-form-item',[_c('div',{staticClass:\"header\"},[_c('el-image',{attrs:{\"src\":require('@/assets/image/logo.png'),\"alt\":\"\"}}),_c('span',{staticClass:\"tip\"},[_vm._v(\"重置密码\")])],1)]),_c('el-form-item',{attrs:{\"prop\":\"phone\"}},[_c('el-input',{ref:\"inputRePhone\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入手机号\"},model:{value:(_vm.restoreForm.phone),callback:function ($$v) {_vm.$set(_vm.restoreForm, \"phone\", $$v)},expression:\"restoreForm.phone\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"code\"}},[_c('el-input',{ref:\"inputReCode\",attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"请输入6位数验证码\"},model:{value:(_vm.restoreForm.code),callback:function ($$v) {_vm.$set(_vm.restoreForm, \"code\", $$v)},expression:\"restoreForm.code\"}},[_c('span',{class:'code ' + (_vm.sendCodeTime === 0 ? 'code-link' : 'code-disabled'),attrs:{\"slot\":\"suffix\"},on:{\"click\":function($event){return _vm.getPhoneCode()}},slot:\"suffix\"},[_vm._v(\" \"+_vm._s(_vm.sendCodeTime === 0 ? \"发送验证码\" : _vm.sendCodeTime + \"s后再次发送\")+\" \")])])],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isSend),expression:\"isSend\"}],ref:\"inputRePassword\",attrs:{\"placeholder\":\"请输入新密码\",\"show-password\":\"\"},model:{value:(_vm.restoreForm.newPassword),callback:function ($$v) {_vm.$set(_vm.restoreForm, \"newPassword\", $$v)},expression:\"restoreForm.newPassword\"}})],1),_c('el-form-item',[_c('el-button',{class:'btn-submit ' + (_vm.restoreForm.phone ? '' : 'not-allowed'),attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm()}}},[_vm._v(\"修改密码\")])],1),_c('el-form-item',[_c('el-link',{attrs:{\"underline\":false,\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push({ name: 'login' })}}},[_vm._v(\"返回登录\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* 合法uri */\r\nexport function validateURL(textval) {\r\n    const urlregex = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!$&'\\*\\+,;=.]+$/\r\n    return urlregex.test(textval)\r\n}\r\n/* 小写字母 */\r\nexport function validateLowerCase(str) {\r\n    const reg = /^[a-z]+$/\r\n    return reg.test(str)\r\n}\r\n/* 大写字母 */\r\nexport function validateUpperCase(str) {\r\n    const reg = /^[A-Z]+$/\r\n    return reg.test(str)\r\n}\r\n/* 大小写字母 */\r\nexport function validateAlphabets(str) {\r\n    const reg = /^[A-Za-z]+$/\r\n    return reg.test(str)\r\n}\r\n/* 市场售价 */\r\nexport function validatePrice(str) {\r\n    const reg = /(^[1-9]\\d*(\\.\\d{1,2})?$)|(^0(\\.\\d{1,2})?$)/\r\n    return reg.test(str)\r\n}\r\n/* 库存预警值 匹配非负整数（正整数 + 0） */\r\nexport function validatestockWarn(str) {\r\n    const reg = /^(0|[1-9][0-9]*)$/\r\n    return reg.test(str)\r\n}\r\n/* 比价网站 只验证京东和苏宁网站 */\r\nexport function validateCompareWebsite(str) {\r\n    const reg = /^((https\\:\\/\\/[0-9a-zA-Z\\_]+\\.|http\\:\\/\\/[0-9a-zA-Z\\_]+\\.|https\\:\\/\\/|http\\:\\/\\/)|([0-9a-zA-Z\\_]+\\.){0,1})(jd|suning)\\.(com$|com\\/[\\S]*)/i\r\n    return reg.test(str)\r\n}\r\n/* 固定电话 */\r\nexport function validateTelephone(str) {\r\n    const reg = /^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/\r\n    return reg.test(str)\r\n}\r\n/* 手机号码 */\r\nexport function validatePhoneNumber(str) {\r\n    const reg = /^[1][3,4,5,6,7,8,9][0-9]{9}$/\r\n    return reg.test(str)\r\n}\r\n/* 手机号码和固定电话 */\r\nexport function validatePhTelNumber(str) {\r\n    const reg = /^((0\\d{2,3}-\\d{7,8})|(1[3456789]\\d{9}))$/\r\n    return reg.test(str)\r\n}\r\n/* 电子邮箱 */\r\nexport function validateEmail(str) {\r\n    const reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/\r\n    return reg.test(str)\r\n}\r\n/* 邮编 */\r\nexport function validateZipCode(str) {\r\n    const reg = /^[1-9][0-9]{5}$/\r\n    return reg.test(str)\r\n}\r\n/* 身份证 */\r\nexport function validateIDCard(str) {\r\n    const reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/\r\n    return reg.test(str)\r\n}\r\n/* 银行卡号 15位或者16位或者19位 */\r\nexport function validateBank(str) {\r\n    const reg = /^([1-9]{1})(\\d{14}|\\d{18}|\\d{15})$/\r\n    return reg.test(str)\r\n}\r\n/* 纳税人识别码 */\r\nexport function validateTaxpayer(str) {\r\n    const reg = /^([1-9]{1})(\\d{14}|\\d{18}|\\d{15})$/\r\n    return reg.test(str)\r\n}\r\n/* 匹配全空格 */\r\nexport function validateAllBlank(str) {\r\n    const reg = /^\\s+$/gi\r\n    return reg.test(str)\r\n}","<template>\r\n  <!-- 账密登录 -->\r\n  <el-form :model=\"restoreForm\" status-icon size=\"medium\" ref=\"restoreForm\">\r\n    <el-form-item>\r\n      <div class=\"header\">\r\n        <el-image :src=\"require('@/assets/image/logo.png')\" alt=\"\"></el-image>\r\n        <span class=\"tip\">重置密码</span>\r\n      </div>\r\n    </el-form-item>\r\n\r\n    <el-form-item prop=\"phone\">\r\n      <el-input\r\n        type=\"text\"\r\n        v-model=\"restoreForm.phone\"\r\n        placeholder=\"请输入手机号\"\r\n        ref=\"inputRePhone\"\r\n      >\r\n      </el-input>\r\n    </el-form-item>\r\n    <el-form-item prop=\"code\">\r\n      <el-input\r\n        type=\"text\"\r\n        v-model=\"restoreForm.code\"\r\n        autocomplete=\"off\"\r\n        placeholder=\"请输入6位数验证码\"\r\n        ref=\"inputReCode\"\r\n      >\r\n        <span\r\n          slot=\"suffix\"\r\n          :class=\"\r\n            'code ' + (sendCodeTime === 0 ? 'code-link' : 'code-disabled')\r\n          \"\r\n          @click=\"getPhoneCode()\"\r\n        >\r\n          {{ sendCodeTime === 0 ? \"发送验证码\" : sendCodeTime + \"s后再次发送\" }}\r\n        </span>\r\n      </el-input>\r\n    </el-form-item>\r\n    <el-form-item prop=\"password\">\r\n      <el-input\r\n        v-model=\"restoreForm.newPassword\"\r\n        placeholder=\"请输入新密码\"\r\n        ref=\"inputRePassword\"\r\n        show-password\r\n        v-show=\"isSend\"\r\n      >\r\n      </el-input>\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-button :class=\"'btn-submit ' + (restoreForm.phone ? '' : 'not-allowed')\" type=\"primary\" @click=\"submitForm()\"\r\n        >修改密码</el-button\r\n      >\r\n    </el-form-item>\r\n\r\n    <el-form-item>\r\n      <el-link\r\n        :underline=\"false\"\r\n        type=\"primary\"\r\n        @click=\"$router.push({ name: 'login' })\"\r\n        >返回登录</el-link\r\n      >\r\n    </el-form-item>\r\n\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\n// import { mapMutations, mapActions } from \"vuex\";\r\nimport { validatePhTelNumber } from \"@/utils/reg\";\r\nexport default {\r\n  name: \"login\",\r\n  data() {\r\n    return {\r\n      restoreForm: {\r\n        phone: \"\",\r\n        code: \"\",\r\n        newPassword: \"\",\r\n      },\r\n      sendCodeTime: 0, //是否在一分钟内发送过验证码,验证码发送倒计时\r\n      isSend: false,\r\n    };\r\n  },\r\n  methods: {\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n    // 发送验证码\r\n    async getPhoneCode() {\r\n      if (this.sendCodeTime === 0) {\r\n        if (!this.restoreForm.phone)\r\n          this.$notify({\r\n            message: \"请输入手机号\",\r\n            type: \"warning\",\r\n            duration: 2000,\r\n          });\r\n\r\n        if (!validatePhTelNumber(this.restoreForm.phone))\r\n          return this.$notify({\r\n            message: \"手机号格式不正确\",\r\n            type: \"warning\",\r\n            duration: 2000,\r\n          });\r\n\r\n        // const {data:res} = await this.sendPhoneCode({\r\n        //   phone: this.restoreForm.phone,\r\n        //   sendType\r\n        // })\r\n        // if(res.code !== 200) return this.$message.error(res.msg);\r\n\r\n        this.$message.success(\"验证码已发送！\");\r\n        this.isSend = true;\r\n        this.sendCodeTime = 60;\r\n        const timer = setInterval(() => {\r\n          this.sendCodeTime--;\r\n          if (this.sendCodeTime === 0) clearInterval(timer);\r\n        }, 1000);\r\n      } else {\r\n        this.$message.warning(\"操作过于频繁！\");\r\n      }\r\n    },\r\n    // 请求：手机重置密码\r\n    async updateByPhone() {\r\n      //   const { data: res } = await this.retrievePasswordByPhone(\r\n      //     this.restoreForm\r\n      //   );\r\n      //   if (res.code !== 200) this.$message.error(res.msg);\r\n      this.$message.success(\"重置成功！自动跳转到登录！\");\r\n      this.resetForm(\"restoreForm\");\r\n      setTimeout(() => {\r\n        this.$router.push({ name: \"login\" });\r\n      }, 1000);\r\n    },\r\n    submitForm() {\r\n      if (!this.restoreForm.phone) {\r\n        this.$notify({\r\n          message: \"请输入手机号\",\r\n          type: \"warning\",\r\n          duration: 2000,\r\n        });\r\n        return this.$refs.inputRePhone.focus();\r\n      }\r\n\r\n      if (!validatePhTelNumber(this.restoreForm.phone)) {\r\n        this.$notify({\r\n          message: \"手机号格式不正确\",\r\n          type: \"warning\",\r\n          duration: 2000,\r\n        });\r\n        return this.$refs.inputRePhone.focus();\r\n      }\r\n      if (this.restoreForm.code === \"\" || this.restoreForm.code.length !== 6) {\r\n        this.$notify({\r\n          message:\r\n            this.restoreForm.code === \"\" ? \"请输入验证码\" : \"验证码位数不正确\",\r\n          type: \"warning\",\r\n          duration: 2000,\r\n        });\r\n        this.$refs.inputReCode.focus();\r\n        return;\r\n      }\r\n      if (\r\n        this.restoreForm.newPassword === \"\" ||\r\n        this.restoreForm.newPassword.length < 6\r\n      ) {\r\n        this.$notify({\r\n          message:\r\n            this.restoreForm.newPassword === \"\"\r\n              ? \"请输入新密码\"\r\n              : \"密码长度不低于6位\",\r\n          type: \"warning\",\r\n          duration: 2000,\r\n        });\r\n        this.$refs.inputRePassword.focus();\r\n        return;\r\n      }\r\n      this.updateByPhone();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .el-image {\r\n    height: 5rem;\r\n  }\r\n\r\n  .tip {\r\n    font-family: qiantu;\r\n    font-size: 1.5rem;\r\n  }\r\n  margin-bottom: 1rem;\r\n}\r\n/deep/.el-input {\r\n  border-radius: 1rem;\r\n  height: 2.5rem;\r\n  font-size: 1.2rem;\r\n\r\n  input {\r\n    height: 100%;\r\n    border-radius: 0.5rem;\r\n  }\r\n}\r\n\r\n\r\n.btn-submit {\r\n  width: 100%;\r\n  height: 3rem;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.not-allowed {\r\n  cursor: not-allowed;\r\n  background-color: var(--bgc-clr3);\r\n}\r\n\r\n.icon {\r\n  height: 3rem;\r\n  width: 3rem;\r\n}\r\n\r\n.code {\r\n  padding: 0 5px 0 10px;\r\n  background-color: #fff;\r\n  z-index: 2;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.code-link {\r\n  color: #63b0ff;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.code-link:hover {\r\n  color: skyblue;\r\n}\r\n\r\n.code-disabled {\r\n  color: #777;\r\n  cursor: default;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./reback.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./reback.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reback.vue?vue&type=template&id=bc4bf392&scoped=true&\"\nimport script from \"./reback.vue?vue&type=script&lang=js&\"\nexport * from \"./reback.vue?vue&type=script&lang=js&\"\nimport style0 from \"./reback.vue?vue&type=style&index=0&id=bc4bf392&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc4bf392\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","attrs","restoreForm","staticClass","require","_v","model","value","phone","callback","$$v","$set","expression","code","class","sendCodeTime","on","$event","getPhoneCode","slot","_s","directives","name","rawName","isSend","newPassword","submitForm","$router","push","staticRenderFns","validatePhTelNumber","str","reg","test","data","methods","resetForm","message","type","duration","setTimeout","component"],"sourceRoot":""}