"use strict";(self["webpackChunkweblog"]=self["webpackChunkweblog"]||[]).push([[508],{87508:function(s,e,i){i.r(e),i.d(e,{default:function(){return d}});var t=function(){var s=this,e=s._self._c;return e("div",{staticClass:"root"},[e("h1",{staticClass:"title"},[s._v("个性化配置")]),e("el-divider",{attrs:{"content-position":"left"}},[e("span",{staticClass:"session-title"},[s._v("主题设置")])]),e("div",{staticClass:"session"},[e("div",{staticClass:"session-item"},[s._m(0),e("div",{staticClass:"item-main"},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:s.config.color,callback:function(e){s.$set(s.config,"color",e)},expression:"config.color"}},s._l(s.themes,(function(s){return e("el-option",{key:s.value,attrs:{label:s.label,value:s.value,default:"#ec8c69"}})})),1)],1)]),e("div",{staticClass:"session-item"},[s._m(1),e("div",{staticClass:"item-main"},[e("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:s.config.isGrey,callback:function(e){s.$set(s.config,"isGrey",e)},expression:"config.isGrey"}})],1)])]),e("el-divider",{attrs:{"content-position":"left"}},[e("span",{staticClass:"session-title"},[s._v("背景设置")])]),e("div",{staticClass:"session"},[e("div",{staticClass:"session-item"},[s._m(2),e("div",{staticClass:"item-main"},[e("div",{staticClass:"bgc-list"},s._l(s.config.backgroundImageList,(function(i,t){return e("div",{key:i+t,staticClass:"bgc-item"},[e("el-image",{staticClass:"image",attrs:{src:i||"#",alt:""}}),e("span",{staticClass:"iconfont icon-quxiao",on:{click:function(e){return s.handleQvxiao(i,t)}}})],1)})),0),e("el-upload",{attrs:{action:s.$upload_path,"list-type":"picture-card","on-preview":s.handlePictureCardPreview,"on-remove":s.handleRemove,"on-success":s.handleSuccess,"before-upload":s.handleBeforeUpload}},[e("i",{staticClass:"el-icon-plus"})]),e("el-dialog",{attrs:{visible:s.dialogVisible},on:{"update:visible":function(e){s.dialogVisible=e}}},[e("el-image",{attrs:{width:"100%",src:s.dialogImageUrl||"#",alt:""}})],1)],1)])]),e("el-divider",{attrs:{"content-position":"left"}},[e("span",{staticClass:"session-title"},[s._v("布局设置")])]),e("div",{staticClass:"session"},[e("div",{staticClass:"session-item"},[s._m(3),e("div",{staticClass:"item-main"},[e("el-radio",{attrs:{label:"left"},model:{value:s.config.menuPlace,callback:function(e){s.$set(s.config,"menuPlace",e)},expression:"config.menuPlace"}},[s._v("左侧")]),e("el-radio",{attrs:{label:"right"},model:{value:s.config.menuPlace,callback:function(e){s.$set(s.config,"menuPlace",e)},expression:"config.menuPlace"}},[s._v("右侧")])],1)])]),e("el-divider",{attrs:{"content-position":"left"}},[e("span",{staticClass:"session-title"},[s._v("个人链接设置")])]),e("div",{staticClass:"session"},[s._v(" 敬请期待 ")]),e("el-divider",{attrs:{"content-position":"left"}},[e("span",{staticClass:"session-title"},[s._v("动画设置")])]),e("div",{staticClass:"session"},[s._v(" 敬请期待 ")]),e("div",{staticClass:"session"},[e("div",{staticClass:"btn-save",style:"visibility: "+(s.isChange?"visible":"hidden"),on:{click:s.handleSave}},[e("span",{staticClass:"iconfont icon-save-fill"}),e("span",{domProps:{textContent:s._s("保存")}})])])],1)},a=[function(){var s=this,e=s._self._c;return e("div",{staticClass:"item-title"},[e("span",[s._v("页面主题：")])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"item-title"},[e("span",[s._v("灰度页面：")])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"item-title"},[e("span",[s._v("轮播图：")])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"item-title"},[e("span",[s._v("菜单布局：")])])}],l=(i(57658),i(20629)),n={name:"settingPage",data(){const s=[{id:"0",label:"默认",value:"#1e80ff"},{id:"1",label:"棕黄",value:"#ec8c69"},{id:"2",label:"浅绿",value:"lightgreen"},{id:"3",label:"浅紫",value:"rgb(183, 140, 247)"},{id:"3",label:"粉色",value:"#ed6ea0"}];return{config:{isGrey:0,color:"blue",menuPlace:"left",backgroundImageList:[]},dialogImageUrl:"",dialogVisible:!1,themes:s,isChange:!1}},watch:{config:{deep:!0,handler(){console.log(this.config),this.isChange=!0}}},computed:{user(){const s=this.$store.state.user;return!!s.token&&s.userInfo}},mounted(){this.getConfig(this.user.id),this.config=this.$store.state.config.config,console.log(this.config)},methods:{...(0,l.OI)("config",["UpdateConfig"]),...(0,l.nv)("config",["setUserTheme","getConfig"]),handleQvxiao(s){this.config.backgroundImageList=this.config.backgroundImageList.filter((e=>!(s===e)))},async handleSave(){try{const s={userId:this.user.id||0,...this.config};s.isGrey=s.isGrey?1:0;const{data:e}=await this.setUserTheme(s);console.log(e),200===e.code?(this.UpdateConfig(this.config),this.$message.success("保存成功！")):this.$message.warning(e.msg)}catch(s){this.$message.error(s)}},handleRemove(s,e){this.handleQvxiao(s.response.data.minIoUrl),console.log(s,e)},handlePictureCardPreview(s){this.dialogImageUrl=s.url,this.dialogVisible=!0,console.log("handlePictureCardPreview",s)},handleSuccess(s,e,i){if(this.config.backgroundImageList.length>=6)return this.$message.warning("背景图限制6张哦！");this.config.backgroundImageList.push(s.data.minIoUrl),console.log("handleSuccess",s,e,i)},handleBeforeUpload(s){const e=s.size/1024/1024<8;return e||this.$message.error("上传头像图片大小不能超过 8MB!"),e}}},o=n,c=i(1001),r=(0,c.Z)(o,t,a,!1,null,"4f349fae",null),d=r.exports}}]);
//# sourceMappingURL=508.e20f03c2.js.map