"use strict";(self["webpackChunkweblog"]=self["webpackChunkweblog"]||[]).push([[391],{37284:function(t,e,a){a.d(e,{Z:function(){return g}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{attrs:{shadow:"never"}},[e("el-form",{attrs:{model:t.data,size:"mini","label-width":"100px"}},[e("el-form-item",{attrs:{label:"博客ID",prop:"blogId"}},[t._v(t._s(t.data.blogId))]),e("el-form-item",{attrs:{label:"发布时间",prop:"createTime"}},[t._v(t._s(t.data.createTime))]),e("el-form-item",{attrs:{label:"用户"}},[t._v(t._s(t.blog.userName))]),e("el-form-item",{attrs:{label:"内容",prop:"activeData"}},[e("el-card",{staticClass:"content"},[e("div",{staticClass:"article card"},[e("h1",{domProps:{textContent:t._s(t.data.title)}}),e("div",{staticClass:"publishInfo"},[e("div",{staticClass:"left-box"},[t.data.headshot?e("el-image",{attrs:{src:t.data.headshot}}):t._e()],1),e("div",{staticClass:"right-box"},[e("div",{staticClass:"top"},[e("span",{domProps:{textContent:t._s(t.data.userName||"weblog游客")}})]),e("div",{staticClass:"bottom"},[e("span",{staticClass:"publishTime",domProps:{textContent:t._s(t.data.updateTime)}}),t.data.readAmount?e("span",{domProps:{textContent:t._s(" · 阅读")}}):t._e(),t.data.readAmount?e("span",{staticClass:"views",domProps:{textContent:t._s(t.data.readAmount)}}):t._e()])])]),t.data.publishImage?e("div",{staticClass:"article-image"},[e("el-image",{staticStyle:{"max-height":"30rem"},attrs:{src:t.data.publishImage}})],1):t._e(),e("div",{staticClass:"article-content markdown-body"},[e("VueMarkdown",{directives:[{name:"highlight",rawName:"v-highlight"}],attrs:{source:t.data.content}})],1),e("div",{staticClass:"article-sort"},[e("span",{staticClass:"article-cate"},[t._v("分类：")]),t.data.category?e("el-tag",{attrs:{type:"danger"},domProps:{textContent:t._s(t.data.category)}}):e("el-tag",{domProps:{textContent:t._s("暂无")}}),e("span",{staticClass:"article-tags"},[t._v("标签：")]),t.data.tag?e("span",t._l(t.stringToArray(t.data.tag),(function(a){return e("el-tag",{key:a,domProps:{textContent:t._s(a)}})})),1):e("el-tag",{domProps:{textContent:t._s("暂无")}})],1)])])],1)],1)],1)],1)},i=[],l=a(89296),n=a.n(l),o={props:{blog:Object},components:{VueMarkdown:n()},name:"checkBlogDetail",data(){return{data:{},map:{}}},mounted(){console.log(this.blog),this.data=this.blog},methods:{stringToArray(t){return t.split(" ")}}},r=o,c=a(1001),d=(0,c.Z)(r,s,i,!1,null,"62319d40",null),g=d.exports},2391:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{name:"welcome"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._v("审核")])],1),e("el-card",{staticClass:"table",staticStyle:{"margin-top":"2rem"}},[e("div",{staticClass:"table-header"},[e("div",{staticClass:"table-header-left"},[e("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.handleDeleteMore()}}},[t._v("删除")])],1),e("div",{staticClass:"table-header-right"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刷新",placement:"top"}},[e("el-button",{staticClass:"el-icon-refresh right-btns",attrs:{size:"small"},on:{click:t.refreshPage}})],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"密度",placement:"top"}},[e("el-button",{staticClass:"el-icon-s-operation right-btns",attrs:{size:"small"}})],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置",placement:"top"}},[e("el-button",{staticClass:"el-icon-setting right-btns",attrs:{size:"small"}})],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"全屏",placement:"top"}},[e("el-button",{staticClass:"el-icon-rank right-btns",attrs:{size:"small"}})],1)],1)]),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",border:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center",fixed:""}}),e("el-table-column",{attrs:{type:"index",width:"50",align:"center",fixed:""}}),e("el-table-column",{attrs:{prop:"status",label:"审核状态",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[2===a.row.status?e("el-tag",{attrs:{type:"warning",size:"mini"}},[t._v("审核中")]):1===a.row.status?e("el-tag",{attrs:{type:"success",size:"mini"}},[t._v("已通过")]):0===a.row.status?e("el-tag",{attrs:{type:"danger",size:"mini"}},[t._v("未通过")]):t._e()],1)]}}])}),e("el-table-column",{attrs:{prop:"title",label:"博客标题",width:"300",align:"center"}}),e("el-table-column",{attrs:{prop:"publishImage",label:"博客封面",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-avatar",{staticStyle:{margin:"0 5px"},attrs:{shape:"square",size:50,src:t.row.publishImage}})]}}])}),e("el-table-column",{attrs:{prop:"id",label:"用户ID",width:"120",align:"center"}}),e("el-table-column",{attrs:{prop:"userName",label:"用户昵称",width:"120",align:"center"}}),e("el-table-column",{attrs:{prop:"userId",label:"用户ID",width:"120",align:"center"}}),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",width:"200"}}),e("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",align:"center",width:"200"}}),e("el-table-column",{attrs:{label:"操作",width:"250",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"el-icon-view",attrs:{size:"mini",type:"success"},on:{click:function(e){return t.openDetail(a.$index,a.row)}}},[t._v("详细信息")]),e("el-popover",{attrs:{placement:"top",width:"200",trigger:"hover"}},[e("div",{staticClass:"operation-box"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.sendAuditResult(!0,a.$index,a.row)}}},[t._v("Pass")]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.sendAuditResult(!1,a.$index,a.row)}}},[t._v("Faile")])],1),2===a.row.status?e("el-button",{staticClass:"el-icon-edit",attrs:{slot:"reference",type:"primary",size:"mini"},slot:"reference"},[t._v("审核")]):t._e()],1)]}}])})],1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"current-page":t.pageMap.page,"page-sizes":[10,20,30,50],"page-size":t.pageMap.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),e("el-dialog",{attrs:{visible:t.dialogVisible2,width:"300px","before-close":t.handleCloseDialog},on:{"update:visible":function(e){t.dialogVisible2=e}}},[e("el-input",{attrs:{type:"textarea",placeholder:"填写不予通过原因",focus:""},model:{value:t.ps,callback:function(e){t.ps=e},expression:"ps"}}),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.sendAuditResultFalse}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"详细信息",visible:t.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("CheckDetail",{attrs:{blog:t.blog}})],1)],1)},i=[],l=a(37284),n=a(20629),o={name:"checkPage",components:{CheckDetail:l.Z},data(){return{dialogVisible:!1,dialogVisible2:!1,dataList:[],pageMap:{size:10,page:1},total:20,multipleSelection:[],tableData:[],ps:"",blog:{}}},computed:{user(){const t=this.$store.state.user;return!!t.token&&t.userInfo}},mounted(){this.getData(),console.log(this.user)},methods:{...(0,n.nv)("admin",["getAuditBlogs","auditBlog"]),async getData(){try{const{data:t}=await this.getAuditBlogs({...this.pageMap});this.tableData=t.data,this.total=t.map.total}catch(t){this.$message.error(t)}},handleCloseDialog(){this.dialogVisible2=!1},async sendCheckBlog(t){try{const{data:e}=await this.auditBlog({userId:this.user.id,blogId:this.blog.blogId,status:t,ps:this.ps});if(200!==e.code)return this.$message.warning(e.msg);1==t?(this.tableData[this.index].status=1,this.$message.success("审核通过！")):(this.tableData[this.index].status=0,this.$message.error("审核未通过！原因："+this.ps),this.ps="")}catch(e){this.$message.error(e)}},sendAuditResult(t,e,a){this.blog=a,this.index=e,t?this.sendCheckBlog(1):this.dialogVisible2=!0},sendAuditResultFalse(){this.ps?(this.sendCheckBlog(0),this.dialogVisible2=!1):this.$message.error("请填写原因")},refreshPage(){location.reload()},handleClose(){this.dialogVisible=!1,this.dialogVisible2=!1},openDetail(t,e){this.blog=e,this.dialogVisible=!0},handleDelete(t,e){console.log(t,e),this.$message.warning("暂未开放功能")},handleDeleteMore(){if(0===this.multipleSelection.length)return this.$message.warning("您还未选择删除的用户！");console.log(this.multipleSelection),this.$message.warning("暂未开放功能")},handleSelectionChange(t){this.multipleSelection=t},handleSizeChange(t){this.pageMap.size=t,this.getData()},handleCurrentChange(t){this.pageMap.page=t,this.getData()}}},r=o,c=a(1001),d=(0,c.Z)(r,s,i,!1,null,"51b28e7c",null),g=d.exports}}]);
//# sourceMappingURL=391.3598ca1e.js.map